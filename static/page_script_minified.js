var script=document.createElement("script");script.src="https://code.jquery.com/jquery-3.4.1.min.js",script.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(script),window.onload=function(){var e,n,t,o;function a(e,n,t){e.pageEls.hasOwnProperty(n)&&(null==t.error?(e.escape&&Object.keys(t).forEach((e,n)=>{"update"!=e&&(t[e]=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/ /g,"&nbsp").replace(/\n/g,"<br>")}(t[e]))}),e.pageEls[n].forEach((e,n)=>{null!=t.user_exception?function(e,n){var t=document.createElement("div");t.innerHTML=n,t.classList.add("error-text"),e.innerHTML="",e.appendChild(t)}(e,t.user_exception):e.innerHTML=t.value})):alert(t.error))}function r(e){e.objects.forEach((e,o)=>{n[e.index](e.evaluated),t[e.index]=e.version}),o=e.log.version,e.log.updated&&console.log(e.log.log)}e={},$.getJSON(window.location.pathname+"?what=json",function(i){o=i.log.version,t=[],i.objects.forEach((n,o)=>{e[n.ref]={kind:n.kind,escape:n.escape,pageEls:[]},t.push(n.version)});for(let n of document.body.getElementsByTagName("*")){var u=n.getAttribute("serverref");if(null!=u&&e.hasOwnProperty(u)){var l=e[u],c=n.getAttribute("itemtype");switch(null==c&&(c="null"),l.pageEls.hasOwnProperty(c)?l.pageEls[c].push(n):l.pageEls[c]=[n],l.kind){case"function":"button"==c&&function(e,i){$(n).bind("click",function(){return $.post(window.location.pathname,{ref:e,action:"button",obj_versions:JSON.stringify(t),log_version:o},function(e,n){var t=JSON.parse(e);a(i,"output",t),null!=t.update&&r(t.update)}),!1})}(u,l);break;case"toggle":"button"==c&&function(e,i){$(n).bind("click",function(){var n,u=i.pageEls.value[0].innerHTML;if(!(!u in["true","false"]))return n="true"!=u,$.post(window.location.pathname,{ref:e,action:"set",value:n,obj_versions:JSON.stringify(t),log_version:o},function(e,n){var t=JSON.parse(e);a(i,"value",t),null!=t.update&&r(t.update)}),!1})}(u,l);break;case"input":"button"==c&&function(e,i){$(n).bind("click",function(){var n=[];for(let e of i.pageEls.fields[0].getElementsByTagName("input"))n.push(e.value);return $.post(window.location.pathname,{ref:e,action:"button",field_values:JSON.stringify(n),obj_versions:JSON.stringify(t),log_version:o},function(e,n){var t=JSON.parse(e);a(i,"output",t),null!=t.update&&r(t.update)}),!1})}(u,l)}}}n=[],i.objects.forEach((t,o)=>{var r=e[t.ref];if(null!=r)switch(t.kind){case"output":return null==r.pageEls.null?void n.push(function(e){}):void function(e){n.push(function(n){a(e,"null",n)})}(r);case"toggle":return null==r.pageEls.value?void n.push(function(e){}):void function(e){n.push(function(n){a(e,"value",n)})}(r);default:n.push(function(e){})}else n.push(function(e){})}),n.forEach((e,n)=>{e(i.objects[n].evaluated)})}),$("#refresh").bind("click",function(){return $.getJSON(window.location.pathname+"?what=json",function(e){n.forEach((n,t)=>{n(e.objects[t].args)})}),!1})};